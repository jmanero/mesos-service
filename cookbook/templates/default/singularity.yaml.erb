##
# Singularity Configuration
# Generated by Chef. BÃ¸rk Off!
##
server:
  type: simple
  applicationContextPath: /singularity
  connector:
    type: http
    port: <%= node['singularity']['port'] %>
  requestLog:
    appenders:
      - type: file
        currentLogFilename: <%= node['singularity']['log'] %>/access.log
        archivedLogFilenamePattern: <%= node['singularity']['log'] %>/access-%d.log.gz
database:
  driverClass: com.mysql.jdbc.Driver
  user: <%= node['singularity']['database']['user'] %>
  password: <%= node['singularity']['database']['password'] %>
  url: jdbc:mysql://<%= node['singularity']['database']['host'] %>:<%= node['singularity']['database']['port'] %>/<%= node['singularity']['database']['name'] %>
mesos:
  master: zk://<%= node['zookeeper']['nodes'].map { |n|
      "#{ n }:#{ node['zookeeper']['config']['clientPort'] }"
    }.join(',') %>/mesos
  defaultCpus: 1
  defaultMemory: 128
  frameworkName: Singularity
  frameworkId: Singularity
  frameworkFailoverTimeout: 1000000
zookeeper:
  quorum: <%= node['zookeeper']['nodes'].map { |n|
      "#{ n }:#{ node['zookeeper']['config']['clientPort'] }"
    }.join(',') %>
  zkNamespace: singularity
  sessionTimeoutMillis: 60000
  connectTimeoutMillis: 5000
  retryBaseSleepTimeMilliseconds: 1000
  retryMaxTries: 3
logging:
  loggers:
    "com.hubspot.singularity" : DEBUG
ui:
  title: Singularity (vagrant)
  baseUrl: http://<%= node['hostname'] %>:<%= node['singularity']['port'] %>/singularity
enableCorsFilter: true
